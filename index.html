<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exchange rate</title>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="bootstrap.min.css">
    <script src="bootstrap.min.js"></script>
    <script src="api.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

</head>
<body style="background-color: #FFFBDB;">
  <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #D9CA82;">
    <a class="navbar-brand" href="#">
      <img src="money.svg" width="30" height="30" class="d-inline-block align-top" alt="">
      Currency Calc
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">
        <a class="nav-item nav-link active" href="#" id="rates_unhide">Exchange rate</a>
        <a class="nav-item nav-link" href="#" id="charts_unhide">Charts</a>
      </div>
    </div>
  </nav>
  <main>
    <div id="rates">
    <form onsubmit="return false" id="form1">
      <div class="form-row justify-content-center" style="margin-bottom: 5%;margin-top: 5%;"><img src="logo.png" class="img-fluid"  style="max-width: 256px;"></div>
      <div class="form-row justify-content-center">
        <div class="col-md-3 mb-3">
          <label for="firstcurr">First currency</label>
          <select class="custom-select form-control" id="firstcurr" style="background-color: #F9E9DC;" required>
            <option value="USD"><div>USD - United States dollar</div></option>
            <option value="EUR"><div>EUR - Euro</div></option>
            <option value="GBP"><div>GBP - Pound sterling</div></option>
            <option value="PLN"><div>PLN - Polish zloty</div></option>
            <option value="CAD"><div>CAD - Canadian dollar</div></option>
            <option value="HKD"><div>HKD - Hong Kong dollar</div></option>
            <option value="ISK"><div>ISK - Icelandic kr贸na</div></option>
            <option value="PHP"><div>PHP - Philippine peso</div></option>
            <option value="DKK"><div>DKK - Danish krone</div></option>
            <option value="HUF"><div>HUF - Hungarian forint</div></option>
            <option value="CZK"><div>CZK - Czech koruna</div></option>
            <option value="RON"><div>RON - Romanian leu</div></option>
            <option value="SEK"><div>SEK - Swedish krona</div></option>
            <option value="IDR"><div>IDR - Indonesian rupiah</div></option>
            <option value="INR"><div>INR - Indian rupee</div></option>
            <option value="BLR"><div>BLR - Belarusian rouble</div></option>
            <option value="RUB"><div>RUB - Russian rouble</div></option>
            <option value="HRK"><div>HRK - Croatian kuna</div></option>
            <option value="JPY"><div>JPY - Japanese yen</div></option>
            <option value="THB"><div>THB - Thai baht</div></option>
            <option value="CHF"><div>CHF - Swiss franc</div></option>
            <option value="MYR"><div>MYR - Malaysian ringgit</div></option>
            <option value="BGN"><div>BGN - Bulgarian lev</div></option>
            <option value="TRY"><div>TRY - Turkish lira</div></option>
            <option value="CNY"><div>CNY - Renminbi</div></option>
            <option value="NOK"><div>NOK - Norwegian krone</div></option>
            <option value="NZD"><div>NZD - New Zealand dollar</div></option>
            <option value="ZAR"><div>ZAR - South African rand</div></option>
            <option value="MXN"><div>MXN - Mexican peso</div></option>
            <option value="SGD"><div>SGD - Singapore dollar</div></option>
            <option value="AUD"><div>AUD - Australian dollar</div></option>
            <option value="ILS"><div>ILS - Israeli Shekel</div></option>
            <option value="KRW"><div>KRW - South Korean won</div></option>
          </select>
        </div>
        <div class="col-md-3 mb-3">
          <label for="secondcurr">Second currency</label>
          <select class="custom-select form-control" id="secondcurr" style="background-color: #F9E9DC;" required>
            <option value="USD"><div>USD - United States dollar</div></option>
            <option value="EUR"><div>EUR - Euro</div></option>
            <option value="GBP"><div>GBP - Pound sterling</div></option>
            <option value="PLN"><div>PLN - Polish zloty</div></option>
            <option value="CAD"><div>CAD - Canadian dollar</div></option>
            <option value="HKD"><div>HKD - Hong Kong dollar</div></option>
            <option value="ISK"><div>ISK - Icelandic kr贸na</div></option>
            <option value="PHP"><div>PHP - Philippine peso</div></option>
            <option value="DKK"><div>DKK - Danish krone</div></option>
            <option value="HUF"><div>HUF - Hungarian forint</div></option>
            <option value="CZK"><div>CZK - Czech koruna</div></option>
            <option value="RON"><div>RON - Romanian leu</div></option>
            <option value="SEK"><div>SEK - Swedish krona</div></option>
            <option value="IDR"><div>IDR - Indonesian rupiah</div></option>
            <option value="INR"><div>INR - Indian rupee</div></option>
            <option value="BLR"><div>BLR - Belarusian rouble</div></option>
            <option value="RUB"><div>RUB - Russian rouble</div></option>
            <option value="HRK"><div>HRK - Croatian kuna</div></option>
            <option value="JPY"><div>JPY - Japanese yen</div></option>
            <option value="THB"><div>THB - Thai baht</div></option>
            <option value="CHF"><div>CHF - Swiss franc</div></option>
            <option value="MYR"><div>MYR - Malaysian ringgit</div></option>
            <option value="BGN"><div>BGN - Bulgarian lev</div></option>
            <option value="TRY"><div>TRY - Turkish lira</div></option>
            <option value="CNY"><div>CNY - Renminbi</div></option>
            <option value="NOK"><div>NOK - Norwegian krone</div></option>
            <option value="NZD"><div>NZD - New Zealand dollar</div></option>
            <option value="ZAR"><div>ZAR - South African rand</div></option>
            <option value="MXN"><div>MXN - Mexican peso</div></option>
            <option value="SGD"><div>SGD - Singapore dollar</div></option>
            <option value="AUD"><div>AUD - Australian dollar</div></option>
            <option value="ILS"><div>ILS - Israeli Shekel</div></option>
            <option value="KRW"><div>KRW - South Korean won</div></option>
          </select>
        </div>
      </div>
      <div class="form-row justify-content-center">
        <div class="col-md-2 mb-3">
          <label for="amount01">First currency amount</label>
          <input type="number" class="form-control" id="amount01" style="background-color: #F9E9DC;" required>
        </div>
        <div class="col-md-2 mb-3">
          <label for="ratio">Ratio</label>
          <input type="text" class="form-control" id="ratio" value="1" style="background-color: #F1C8A7;" disabled>
        </div>
        <div class="col-md-2 mb-3">
          <label for="amount02">Second currency amount</label>
          <input type="text" class="form-control" id="amount02" style="background-color: #F1C8A7;" disabled>
        </div>
      </div>
    </form>    
  </div>
  <div id="charts" style="display: none;" >
    <div class="form-row justify-content-center" style="margin-bottom:5%; margin-top: 5%;"><div id="curve_chart"></div></div>
    <form onsubmit="return false">
      <div class="form-row justify-content-center">
        <div class="col-md-3 mb-3">
          <label for="firstcurr_date">First currency</label>
          <select class="custom-select form-control" id="firstcurr_date" style="background-color: #F9E9DC;" required>
            <option value="USD"><div>USD - United States dollar</div></option>
            <option value="EUR"><div>EUR - Euro</div></option>
            <option value="GBP"><div>GBP - Pound sterling</div></option>
            <option value="PLN"><div>PLN - Polish zloty</div></option>
            <option value="CAD"><div>CAD - Canadian dollar</div></option>
            <option value="HKD"><div>HKD - Hong Kong dollar</div></option>
            <option value="ISK"><div>ISK - Icelandic kr贸na</div></option>
            <option value="PHP"><div>PHP - Philippine peso</div></option>
            <option value="DKK"><div>DKK - Danish krone</div></option>
            <option value="HUF"><div>HUF - Hungarian forint</div></option>
            <option value="CZK"><div>CZK - Czech koruna</div></option>
            <option value="RON"><div>RON - Romanian leu</div></option>
            <option value="SEK"><div>SEK - Swedish krona</div></option>
            <option value="IDR"><div>IDR - Indonesian rupiah</div></option>
            <option value="INR"><div>INR - Indian rupee</div></option>
            <option value="BLR"><div>BLR - Belarusian rouble</div></option>
            <option value="RUB"><div>RUB - Russian rouble</div></option>
            <option value="HRK"><div>HRK - Croatian kuna</div></option>
            <option value="JPY"><div>JPY - Japanese yen</div></option>
            <option value="THB"><div>THB - Thai baht</div></option>
            <option value="CHF"><div>CHF - Swiss franc</div></option>
            <option value="MYR"><div>MYR - Malaysian ringgit</div></option>
            <option value="BGN"><div>BGN - Bulgarian lev</div></option>
            <option value="TRY"><div>TRY - Turkish lira</div></option>
            <option value="CNY"><div>CNY - Renminbi</div></option>
            <option value="NOK"><div>NOK - Norwegian krone</div></option>
            <option value="NZD"><div>NZD - New Zealand dollar</div></option>
            <option value="ZAR"><div>ZAR - South African rand</div></option>
            <option value="MXN"><div>MXN - Mexican peso</div></option>
            <option value="SGD"><div>SGD - Singapore dollar</div></option>
            <option value="AUD"><div>AUD - Australian dollar</div></option>
            <option value="ILS"><div>ILS - Israeli Shekel</div></option>
            <option value="KRW"><div>KRW - South Korean won</div></option>
          </select>
        </div>
        <div class="col-md-3 mb-3">
          <label for="secondcurr_date">Second currency</label>
          <select class="custom-select form-control" id="secondcurr_date" style="background-color: #F9E9DC;" required>
            <option value="USD"><div>USD - United States dollar</div></option>
            <option value="EUR"><div>EUR - Euro</div></option>
            <option value="GBP"><div>GBP - Pound sterling</div></option>
            <option value="PLN"><div>PLN - Polish zloty</div></option>
            <option value="CAD"><div>CAD - Canadian dollar</div></option>
            <option value="HKD"><div>HKD - Hong Kong dollar</div></option>
            <option value="ISK"><div>ISK - Icelandic kr贸na</div></option>
            <option value="PHP"><div>PHP - Philippine peso</div></option>
            <option value="DKK"><div>DKK - Danish krone</div></option>
            <option value="HUF"><div>HUF - Hungarian forint</div></option>
            <option value="CZK"><div>CZK - Czech koruna</div></option>
            <option value="RON"><div>RON - Romanian leu</div></option>
            <option value="SEK"><div>SEK - Swedish krona</div></option>
            <option value="IDR"><div>IDR - Indonesian rupiah</div></option>
            <option value="INR"><div>INR - Indian rupee</div></option>
            <option value="BLR"><div>BLR - Belarusian rouble</div></option>
            <option value="RUB"><div>RUB - Russian rouble</div></option>
            <option value="HRK"><div>HRK - Croatian kuna</div></option>
            <option value="JPY"><div>JPY - Japanese yen</div></option>
            <option value="THB"><div>THB - Thai baht</div></option>
            <option value="CHF"><div>CHF - Swiss franc</div></option>
            <option value="MYR"><div>MYR - Malaysian ringgit</div></option>
            <option value="BGN"><div>BGN - Bulgarian lev</div></option>
            <option value="TRY"><div>TRY - Turkish lira</div></option>
            <option value="CNY"><div>CNY - Renminbi</div></option>
            <option value="NOK"><div>NOK - Norwegian krone</div></option>
            <option value="NZD"><div>NZD - New Zealand dollar</div></option>
            <option value="ZAR"><div>ZAR - South African rand</div></option>
            <option value="MXN"><div>MXN - Mexican peso</div></option>
            <option value="SGD"><div>SGD - Singapore dollar</div></option>
            <option value="AUD"><div>AUD - Australian dollar</div></option>
            <option value="ILS"><div>ILS - Israeli Shekel</div></option>
            <option value="KRW"><div>KRW - South Korean won</div></option>
          </select>
        </div>
      </div>
      <div class="form-row justify-content-center">
        <div class="col-md-3 mb-3">
          <label for="startdate">Start date</label>
          <input type="date" class="form-control" id="startdate" style="background-color: #F9E9DC;" required>
        </div>
        <div class="col-md-3 mb-3">
          <label for="enddate">End date</label>
          <input type="date" class="form-control" id="enddate" style="background-color: #F9E9DC;" required>
        </div></div>
        <div class="form-row justify-content-center">
        <div class="col-md-6 mb-3">
          <button type="button" form="form1" value="Submit" id="subbut">Generate</button>
        </div>
      </div>
    </form> 
  </div>

  <script>
  $("#firstcurr").change(function(){
    getval01($("#firstcurr").val(),$("#secondcurr").val())
    setTimeout(function(){
    let wart = $("#amount01").val() * $("#ratio").val()
    $("#amount02").val(wart.toFixed(2))
  }, 200);
  });

  $("#secondcurr").change(function(){
    getval01($("#firstcurr").val(),$("#secondcurr").val())
    setTimeout(function(){
    let wart = $("#amount01").val() * $("#ratio").val()
    $("#amount02").val(wart.toFixed(2))
    }, 200);
  });

  $("#amount01").change(function(){
    getval01($("#firstcurr").val(),$("#secondcurr").val())
    setTimeout(function(){
    let wart = $("#amount01").val() * $("#ratio").val()
    $("#amount02").val(wart.toFixed(2))
  }, 200);
  });

  $("#charts_unhide").click(function(){
   $("#rates").hide();
   $("#charts").show();
  });

  $("#rates_unhide").click(function(){
   $("#charts").hide();
   $("#rates").show();
  });
  </script>
  <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      

      function drawChart(firstcurr_date,secondcurr_date,startdate,enddate) {
        const addr = 'https://api.exchangeratesapi.io/history?start_at='+startdate+'&end_at='+enddate+'&base='+firstcurr_date+'&symbols='+secondcurr_date
    fetch(addr)
    .then((resp) => resp.json())
    .then(function(data) {
      let tabledata_historic = data;
     var arr= Object.entries(tabledata_historic.rates);
     var arr2 = new Array
     var arr_tmp = new Array
     var arr_tmp2 = new Array
     var arr_final = new Array
     for(var i=0;i<arr.length;i++)
     {
     arr_tmp[i]= Object.entries(arr[i][1]);
     arr_tmp2[i]=arr_tmp[i][0]
     arr2[i]=arr_tmp2[i][1]
    }

    for(var j=0;j<arr.length;j++){
      arr_final[j]=[]
        arr_final[j][0]=new Date(arr[j][0])
    }
    for(var j=0;j<arr.length;j++){
        arr_final[j][1]=arr2[j]
    }

    arr_final.sort(sortFunction);

    function sortFunction(a, b) {
    if (a[0] === b[0]) {
        return 0;
    }
    else {
        return (a[0] < b[0]) ? -1 : 1;
    }
  }
    var data = google.visualization.arrayToDataTable(arr_final,true)
    var options = {
          title: 'Currency ratio',
          legend: 'none',
          vAxis: { scaleType: 'date'}
        };

            
        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);
    })
    .catch(function(error) {
      console.log(error);
    });

      }
  
$("#subbut").click(function(){
  let wart1 = $("#firstcurr_date").val()
  let wart2 = $("#secondcurr_date").val()
  let wart3 = $("#startdate").val()
  let wart4 = $("#enddate").val()
  google.charts.setOnLoadCallback(drawChart(wart1,wart2,wart3,wart4));
  //drawChart()
});

   </script>


</main>
</body>
</html> 
